{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/scripts/classes/Card.js","src/scripts/classes/CardForm.js","src/scripts/classes/CardList.js","src/scripts/classes/Modal.js","src/scripts/helpers/card.js","src/scripts/script.js"],"names":[],"mappings":"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","file":"script.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import cardHelper from '../helpers/card.js';\n\nexport default class {\n    constructor({ number, comment, brandImageUrl }) {\n        this.id = `card${cardHelper.removeSpaces(number)}`;\n        this.number = number;\n        this.comment = comment;\n        this.brandImageUrl = brandImageUrl;\n    };\n\n    getAsHtml(buttonHandler) {\n        const card = document.createElement('div');\n        const button = document.createElement('button');\n        \n        card.setAttribute('class', 'list-card');\n        card.innerHTML = `\n            <div class=\"list-card__comment\">${this.comment}</div>\n            <div class=\"list-card__number\">${cardHelper.splitByFourNumbers(this.number)}</div>\n            <img src=\"${this.brandImageUrl}\"/>`;\n        \n        button.setAttribute('type', 'button');\n        button.innerText = 'Remove';\n        button.onclick = buttonHandler;\n        card.append(button)\n\n        return card;\n    };\n}\n","import Card from './Card.js'\r\nimport cardHelper from '../helpers/card.js';\r\n\r\nconst cardInfoApiKey = 'b09f0613ed846051bfe94c7174ab16e8';\r\nconst cardInfoApiUrl = 'https://api.cardinfo.online';\r\n\r\nconst messages = {\r\n    cardNumberRequired: 'Card Number is required',\r\n    cardNumberLength: 'Your card number should has 16 symbols',\r\n    cardType: 'Your card must be only Visa or MasterCard',\r\n    cardTypeApiRequest: 'Error in API request for card number validation',\r\n    cardIsAlreadyExists: 'You already has card with this number',\r\n    cardCommentLength: 'Your comment should has maximum 1024 symbols',\r\n};\r\n\r\nexport default class {\r\n    constructor(selectors, cardModal, cardList) {\r\n        this.selectors = selectors;\r\n        this.hasErrors = false;\r\n        this.numberError = '';\r\n        this.commentError = '';\r\n        this.cardModal = cardModal;\r\n        this.cardList = cardList;\r\n\r\n        this.cardLogoImage = '';\r\n        this.cardNumber = '';\r\n        this.cardComment = '';\r\n\r\n        this.handleCardNumberInput();\r\n        this.handleCardCommentInput();\r\n        this.handleCreateCardButton();\r\n        this.handleOpenModal();\r\n    };\r\n    cardNumberRequired(cb) {\r\n        if(!this.cardNumber) {\r\n            cb(messages.cardNumberRequired);\r\n        } else {\r\n            this.cardNumberLength(cb);\r\n        }\r\n    };\r\n    cardNumberLength(cb) {\r\n        if(this.cardNumber.replace(' ', '').length !== 16) {\r\n            cb(messages.cardNumberLength);\r\n        } else {\r\n            this.cardIsAlreadyExists(cb);\r\n        }\r\n    };\r\n    cardIsAlreadyExists(cb) {\r\n        if(!!this.cardList.cards.find(item => item.number === this.cardNumber)){\r\n            cb(messages.cardIsAlreadyExists);\r\n        } else {\r\n            this.cardType(cb);\r\n        }      \r\n    };\r\n    cardType(cb) {\r\n        const requestUrl = `${cardInfoApiUrl}?input=${cardHelper.getFirstSixNumbers(this.cardNumber)}&apiKey=${cardInfoApiKey}`;\r\n        fetch(requestUrl).then((response) => response.json())\r\n        .then((data) => {\r\n            if((data.brandAlias === 'mastercard') || (data.brandAlias === 'visa')) {                \r\n                cb();\r\n                this.cardLogoImage = data.brandLogoOriginalPng;\r\n            } else {\r\n                cb(messages.cardType);\r\n            }\r\n        }).catch(() => {\r\n            cb(messages.cardTypeApiRequest);\r\n        })\r\n    };\r\n    cardCommentLength(cb) {\r\n        if(this.cardComment.length > 1024) {\r\n            cb(messages.cardCommentLength);\r\n        } else {\r\n            cb();\r\n        };\r\n    };\r\n    validateNumber(cb) {\r\n        this.cardNumberRequired((message) => {\r\n            if(message) {\r\n                this.hasErrors = true;\r\n                this.selectors.numberError.innerText = message;\r\n            } else {\r\n                this.hasErrors = false;\r\n                this.selectors.numberError.innerText = '';\r\n                if(cb) cb();\r\n            }\r\n        })\r\n    };\r\n    validateComment() {\r\n        this.cardCommentLength((message) => {\r\n            if(message) {\r\n                this.hasErrors = true;\r\n                this.selectors.commentError.innerText = message;\r\n            } else {\r\n                this.hasErrors = false;\r\n                this.selectors.commentError.innerText = '';\r\n            }\r\n        })\r\n    };\r\n    handleCardNumberInput() {\r\n        this.selectors.numberInput.onchange = (e) => {\r\n            const number = e.target.value;\r\n            this.cardNumber = number;\r\n            this.validateNumber();\r\n        };\r\n    };\r\n    handleCardCommentInput() {\r\n        this.selectors.commentInput.onchange = (e) => {\r\n            const comment = e.target.value;\r\n            this.cardComment = comment;\r\n            this.validateComment();\r\n        };       \r\n    };\r\n    handleCreateCardButton () {\r\n        this.cardModal.saveButtonHandler(() => {\r\n            this.validateNumber(() => {\r\n                const card = new Card({\r\n                    number: this.cardNumber,\r\n                    comment: this.cardComment,\r\n                    brandImageUrl: this.cardLogoImage\r\n                });\r\n                this.cardList.add(card);\r\n                this.cardModal.hide();\r\n                this.clear();\r\n            });\r\n        });\r\n    };\r\n    handleOpenModal() {\r\n        this.selectors.addCardButton.onclick = () => {\r\n            this.cardModal.show();\r\n        }\r\n    };\r\n    clear() {\r\n        this.cardNumber = '';\r\n        this.cardComment = '';\r\n        this.cardLogoImage = '';\r\n        this.selectors.commentInput.value = '';\r\n        this.selectors.numberInput.value = '';\r\n    };\r\n}","import Card from './Card';\r\n\r\nconst emptyContainerText = 'Your card list is empty, try add new cards using \\'Add\\' button above';\r\nconst localStorageName = 'cards-list';\r\n\r\nexport default class {\r\n    constructor(containerSelector, deleteConfirmModal) {\r\n        this.cards = [];\r\n        this.containerSelector = containerSelector;\r\n        this.deleteConfirmModal = deleteConfirmModal;\r\n\r\n        this.cardsToObjects();\r\n        this.updateCardsContainer();\r\n    };\r\n    add(card) {\r\n        this.cards.push(card);\r\n        this.updateCardsContainer();\r\n    };\r\n    remove(cardId) {\r\n        this.cards = this.cards.filter(item => item.id !== cardId);\r\n        this.updateCardsContainer();\r\n    };\r\n    updateCardsContainer() {\r\n        this.containerSelector.innerHTML = '';\r\n        if(this.cards.length > 0) {\r\n            this.cards.forEach(card => {\r\n                this.containerSelector.append(card.getAsHtml(() => { \r\n                    this.deleteConfirmModal.show();\r\n                    this.deleteConfirmModal.saveButtonHandler(() => {\r\n                        this.remove(card.id);\r\n                        this.deleteConfirmModal.hide();\r\n                    })\r\n                }));\r\n            });\r\n        } else {\r\n            this.containerSelector.innerText = emptyContainerText; \r\n        }\r\n        localStorage.setItem(localStorageName, JSON.stringify(this.cards));\r\n    };\r\n    cardsToObjects() {\r\n        let cardsArray = JSON.parse(localStorage.getItem(localStorageName));\r\n        if (cardsArray) {\r\n            cardsArray.forEach( item => {\r\n                this.cards.push(new Card(item));\r\n            });\r\n        }\r\n    };\r\n}","export default class {\r\n    constructor (modalSelector) {\r\n        this.modalSelector = modalSelector;\r\n        this.closeModalSelector = modalSelector.querySelector('.close');\r\n        this.saveModalSelector = modalSelector.querySelector('.save');\r\n\r\n        this.closeButtonHandler(() => {\r\n            this.hide();\r\n        });\r\n    };\r\n    show() {\r\n        this.modalSelector.classList.add('active');\r\n    };\r\n    hide() {\r\n        this.modalSelector.classList.remove('active');\r\n    };\r\n    disableButtons() {\r\n        this.closeModalSelector.setAttribute('disabled', 'disabled');\r\n        this.saveModalSelector.setAttribute('disabled', 'disabled');\r\n    };\r\n    enableButtons() {\r\n        this.closeModalSelector.removeAttribute('disabled');\r\n        this.saveModalSelector.removeAttribute('disabled');\r\n    };\r\n    closeButtonHandler(cb) {\r\n        this.closeModalSelector.onclick = cb;\r\n    };\r\n    saveButtonHandler(cb) {\r\n        this.saveModalSelector.onclick = cb;\r\n    }\r\n}","export default {\r\n    splitByFourNumbers(number) {\r\n        return `${number.slice(0, 4)} ${number.slice(4, 8)} ${number.slice(8, 12)} ${number.slice(12, 16)}`;\r\n    },\r\n    getFirstSixNumbers(number) {\r\n        return number.replace( /\\s/g, \"\").slice(0, 6);\r\n    },\r\n    removeSpaces(number) {\r\n        return number.replace( /\\s/g, \"\");\r\n    },\r\n}","import CardList from './classes/CardList.js';\r\nimport CardForm from './classes/CardForm.js';\r\nimport Modal from './classes/Modal.js';\r\n\r\n\r\nconst cardModal = new Modal(document.getElementById('cardModal'));\r\nconst deleteConfirmModal = new Modal(document.getElementById('deleteConfirmModal'));\r\n\r\nconst cardList = new CardList(document.getElementById('cardsContainer'), deleteConfirmModal);\r\n\r\nnew CardForm({\r\n        numberInput: document.querySelector('.card-number'),\r\n        numberError: document.querySelector('.card-number-error'),\r\n        commentInput: document.querySelector('.card-comment'),\r\n        commentError: document.querySelector('.card-comment-error'),\r\n        addCardButton: document.getElementById('addCard'),\r\n    }, \r\n    cardModal, \r\n    cardList,\r\n);\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvc2NyaXB0cy9jbGFzc2VzL0NhcmQuanMiLCJzcmMvc2NyaXB0cy9jbGFzc2VzL0NhcmRGb3JtLmpzIiwic3JjL3NjcmlwdHMvY2xhc3Nlcy9DYXJkTGlzdC5qcyIsInNyYy9zY3JpcHRzL2NsYXNzZXMvTW9kYWwuanMiLCJzcmMvc2NyaXB0cy9oZWxwZXJzL2NhcmQuanMiLCJzcmMvc2NyaXB0cy9zY3JpcHQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7Ozs7QUFHSSwwQkFBZ0Q7QUFBQSxRQUFsQyxNQUFrQyxRQUFsQyxNQUFrQztBQUFBLFFBQTFCLE9BQTBCLFFBQTFCLE9BQTBCO0FBQUEsUUFBakIsYUFBaUIsUUFBakIsYUFBaUI7O0FBQUE7O0FBQzVDLFNBQUssRUFBTCxpQkFBaUIsaUJBQVcsWUFBWCxDQUF3QixNQUF4QixDQUFqQjtBQUNBLFNBQUssTUFBTCxHQUFjLE1BQWQ7QUFDQSxTQUFLLE9BQUwsR0FBZSxPQUFmO0FBQ0EsU0FBSyxhQUFMLEdBQXFCLGFBQXJCO0FBQ0g7Ozs7OEJBRVMsYSxFQUFlO0FBQ3JCLFVBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxhQUFULENBQXVCLEtBQXZCLENBQWI7QUFDQSxVQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsYUFBVCxDQUF1QixRQUF2QixDQUFmO0FBRUEsTUFBQSxJQUFJLENBQUMsWUFBTCxDQUFrQixPQUFsQixFQUEyQixXQUEzQjtBQUNBLE1BQUEsSUFBSSxDQUFDLFNBQUwsNkRBQ3NDLEtBQUssT0FEM0Msa0VBRXFDLGlCQUFXLGtCQUFYLENBQThCLEtBQUssTUFBbkMsQ0FGckMsNENBR2dCLEtBQUssYUFIckI7QUFLQSxNQUFBLE1BQU0sQ0FBQyxZQUFQLENBQW9CLE1BQXBCLEVBQTRCLFFBQTVCO0FBQ0EsTUFBQSxNQUFNLENBQUMsU0FBUCxHQUFtQixRQUFuQjtB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SixDQUFVLFFBQVEsQ0FBQyxjQUFULENBQXdCLFdBQXhCLENBQVYsQ0FBbEI7QUFDQSxJQUFNLGtCQUFrQixHQUFHLElBQUksaUJBQUosQ0FBVSxRQUFRLENBQUMsY0FBVCxDQUF3QixvQkFBeEIsQ0FBVixDQUEzQjtBQUVBLElBQU0sUUFBUSxHQUFHLElBQUksb0JBQUosQ0FBYSxRQUFRLENBQUMsY0FBVCxDQUF3QixnQkFBeEIsQ0FBYixFQUF3RCxrQkFBeEQsQ0FBakI7QUFFQSxJQUFJLG9CQUFKLENBQWE7QUFDTCxFQUFBLFdBQVcsRUFBRSxRQUFRLENBQUMsYUFBVCxDQUF1QixjQUF2QixDQURSO0FBRUwsRUFBQSxXQUFXLEVBQUUsUUFBUSxDQUFDLGFBQVQsQ0FBdUIsb0JBQXZCLENBRlI7QUFHTCxFQUFBLFlBQVksRUFBRSxRQUFRLENBQUMsYUFBVCxDQUF1QixlQUF2QixDQUhUO0FBSUwsRUFBQSxZQUFZLEVBQUUsUUFBUSxDQUFDLGFBQVQsQ0FBdUIscUJBQXZCLENBSlQ7QUFLTCxFQUFBLGFBQWEsRUFBRSxRQUFRLENBQUMsY0FBVCxDQUF3QixTQUF4QjtBQUxWLENBQWIsRUFPSSxTQVBKLEVBUUksUUFSSiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsImltcG9ydCBjYXJkSGVscGVyIGZyb20gJy4uL2hlbHBlcnMvY2FyZC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih7IG51bWJlciwgY29tbWVudCwgYnJhbmRJbWFnZVVybCB9KSB7XG4gICAgICAgIHRoaXMuaWQgPSBgY2FyZCR7Y2FyZEhlbHBlci5yZW1vdmVTcGFjZXMobnVtYmVyKX1gO1xuICAgICAgICB0aGlzLm51bWJlciA9IG51bWJlcjtcbiAgICAgICAgdGhpcy5jb21tZW50ID0gY29tbWVudDtcbiAgICAgICAgdGhpcy5icmFuZEltYWdlVXJsID0gYnJhbmRJbWFnZVVybDtcbiAgICB9O1xuXG4gICAgZ2V0QXNIdG1sKGJ1dHRvbkhhbmRsZXIpIHtcbiAgICAgICAgY29uc3QgY2FyZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb25zdCBidXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcbiAgICAgICAgXG4gICAgICAgIGNhcmQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdsaXN0LWNhcmQnKTtcbiAgICAgICAgY2FyZC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdC1jYXJkX19jb21tZW50XCI+JHt0aGlzLmNvbW1lbnR9PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGlzdC1jYXJkX19udW1iZXJcIj4ke2NhcmRIZWxwZXIuc3BsaXRCeUZvdXJOdW1iZXJzKHRoaXMubnVtYmVyKX08L2Rpdj5cbiAgICAgICAgICAgIDxpbWcgc3JjPVwiJHt0aGlzLmJyYW5kSW1hZ2VVcmx9XCIvPmA7XG4gICAgICAgIFxuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCd0eXBlJywgJ2J1dHRvbicpO1xuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gJ1JlbW92ZSc7XG4gICAgICAgIGJ1dHRvbi5vbmNsaWNrID0gYnV0dG9uSGFuZGxlcjtcbiAgICAgICAgY2FyZC5hcHBlbmQoYnV0dG9uKVxuXG4gICAgICAgIHJldHVybiBjYXJkO1xuICAgIH07XG59XG4iLCJpbXBvcnQgQ2FyZCBmcm9tICcuL0NhcmQuanMnXHJcbmltcG9ydCBjYXJkSGVscGVyIGZyb20gJy4uL2hlbHBlcnMvY2FyZC5qcyc7XHJcblxyXG5jb25zdCBjYXJkSW5mb0FwaUtleSA9ICdiMDlmMDYxM2VkODQ2MDUxYmZlOTRjNzE3NGFiMTZlOCc7XHJcbmNvbnN0IGNhcmRJbmZvQXBpVXJsID0gJ2h0dHBzOi8vYXBpLmNhcmRpbmZvLm9ubGluZSc7XHJcblxyXG5jb25zdCBtZXNzYWdlcyA9IHtcclxuICAgIGNhcmROdW1iZXJSZXF1aXJlZDogJ0NhcmQgTnVtYmVyIGlzIHJlcXVpcmVkJyxcclxuICAgIGNhcmROdW1iZXJMZW5ndGg6ICdZb3VyIGNhcmQgbnVtYmVyIHNob3VsZCBoYXMgMTYgc3ltYm9scycsXHJcbiAgICBjYXJkVHlwZTogJ1lvdXIgY2FyZCBtdXN0IGJlIG9ubHkgVmlzYSBvciBNYXN0ZXJDYXJkJyxcclxuICAgIGNhcmRUeXBlQXBpUmVxdWVzdDogJ0Vycm9yIGluIEFQSSByZXF1ZXN0IGZvciBjYXJkIG51bWJlciB2YWxpZGF0aW9uJyxcclxuICAgIGNhcmRJc0FscmVhZHlFeGlzdHM6ICdZb3UgYWxyZWFkeSBoYXMgY2FyZCB3aXRoIHRoaXMgbnVtYmVyJyxcclxuICAgIGNhcmRDb21tZW50TGVuZ3RoOiAnWW91ciBjb21tZW50IHNob3VsZCBoYXMgbWF4aW11bSAxMDI0IHN5bWJvbHMnLFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3Ioc2VsZWN0b3JzLCBjYXJkTW9kYWwsIGNhcmRMaXN0KSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvcnMgPSBzZWxlY3RvcnM7XHJcbiAgICAgICAgdGhpcy5oYXNFcnJvcnMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm51bWJlckVycm9yID0gJyc7XHJcbiAgICAgICAgdGhpcy5jb21tZW50RXJyb3IgPSAnJztcclxuICAgICAgICB0aGlzLmNhcmRNb2RhbCA9IGNhcmRNb2RhbDtcclxuICAgICAgICB0aGlzLmNhcmRMaXN0ID0gY2FyZExpc3Q7XHJcblxyXG4gICAgICAgIHRoaXMuY2FyZExvZ29JbWFnZSA9ICcnO1xyXG4gICAgICAgIHRoaXMuY2FyZE51bWJlciA9ICcnO1xyXG4gICAgICAgIHRoaXMuY2FyZENvbW1lbnQgPSAnJztcclxuXHJcbiAgICAgICAgdGhpcy5oYW5kbGVDYXJkTnVtYmVySW5wdXQoKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUNhcmRDb21tZW50SW5wdXQoKTtcclxuICAgICAgICB0aGlzLmhhbmRsZUNyZWF0ZUNhcmRCdXR0b24oKTtcclxuICAgICAgICB0aGlzLmhhbmRsZU9wZW5Nb2RhbCgpO1xyXG4gICAgfTtcclxuICAgIGNhcmROdW1iZXJSZXF1aXJlZChjYikge1xyXG4gICAgICAgIGlmKCF0aGlzLmNhcmROdW1iZXIpIHtcclxuICAgICAgICAgICAgY2IobWVzc2FnZXMuY2FyZE51bWJlclJlcXVpcmVkKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNhcmROdW1iZXJMZW5ndGgoY2IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjYXJkTnVtYmVyTGVuZ3RoKGNiKSB7XHJcbiAgICAgICAgaWYodGhpcy5jYXJkTnVtYmVyLnJlcGxhY2UoJyAnLCAnJykubGVuZ3RoICE9PSAxNikge1xyXG4gICAgICAgICAgICBjYihtZXNzYWdlcy5jYXJkTnVtYmVyTGVuZ3RoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNhcmRJc0FscmVhZHlFeGlzdHMoY2IpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjYXJkSXNBbHJlYWR5RXhpc3RzKGNiKSB7XHJcbiAgICAgICAgaWYoISF0aGlzLmNhcmRMaXN0LmNhcmRzLmZpbmQoaXRlbSA9PiBpdGVtLm51bWJlciA9PT0gdGhpcy5jYXJkTnVtYmVyKSl7XHJcbiAgICAgICAgICAgIGNiKG1lc3NhZ2VzLmNhcmRJc0FscmVhZHlFeGlzdHMpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FyZFR5cGUoY2IpO1xyXG4gICAgICAgIH0gICAgICBcclxuICAgIH07XHJcbiAgICBjYXJkVHlwZShjYikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RVcmwgPSBgJHtjYXJkSW5mb0FwaVVybH0/aW5wdXQ9JHtjYXJkSGVscGVyLmdldEZpcnN0U2l4TnVtYmVycyh0aGlzLmNhcmROdW1iZXIpfSZhcGlLZXk9JHtjYXJkSW5mb0FwaUtleX1gO1xyXG4gICAgICAgIGZldGNoKHJlcXVlc3RVcmwpLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXHJcbiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICAgICAgaWYoKGRhdGEuYnJhbmRBbGlhcyA9PT0gJ21hc3RlcmNhcmQnKSB8fCAoZGF0YS5icmFuZEFsaWFzID09PSAndmlzYScpKSB7ICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY2IoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FyZExvZ29JbWFnZSA9IGRhdGEuYnJhbmRMb2dvT3JpZ2luYWxQbmc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjYihtZXNzYWdlcy5jYXJkVHlwZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGNiKG1lc3NhZ2VzLmNhcmRUeXBlQXBpUmVxdWVzdCk7XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcbiAgICBjYXJkQ29tbWVudExlbmd0aChjYikge1xyXG4gICAgICAgIGlmKHRoaXMuY2FyZENvbW1lbnQubGVuZ3RoID4gMTAyNCkge1xyXG4gICAgICAgICAgICBjYihtZXNzYWdlcy5jYXJkQ29tbWVudExlbmd0aCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY2IoKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIHZhbGlkYXRlTnVtYmVyKGNiKSB7XHJcbiAgICAgICAgdGhpcy5jYXJkTnVtYmVyUmVxdWlyZWQoKG1lc3NhZ2UpID0+IHtcclxuICAgICAgICAgICAgaWYobWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oYXNFcnJvcnMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RvcnMubnVtYmVyRXJyb3IuaW5uZXJUZXh0ID0gbWVzc2FnZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFzRXJyb3JzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdG9ycy5udW1iZXJFcnJvci5pbm5lclRleHQgPSAnJztcclxuICAgICAgICAgICAgICAgIGlmKGNiKSBjYigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH07XHJcbiAgICB2YWxpZGF0ZUNvbW1lbnQoKSB7XHJcbiAgICAgICAgdGhpcy5jYXJkQ29tbWVudExlbmd0aCgobWVzc2FnZSkgPT4ge1xyXG4gICAgICAgICAgICBpZihtZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhc0Vycm9ycyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdG9ycy5jb21tZW50RXJyb3IuaW5uZXJUZXh0ID0gbWVzc2FnZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFzRXJyb3JzID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdG9ycy5jb21tZW50RXJyb3IuaW5uZXJUZXh0ID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfTtcclxuICAgIGhhbmRsZUNhcmROdW1iZXJJbnB1dCgpIHtcclxuICAgICAgICB0aGlzLnNlbGVjdG9ycy5udW1iZXJJbnB1dC5vbmNoYW5nZSA9IChlKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG51bWJlciA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLmNhcmROdW1iZXIgPSBudW1iZXI7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVOdW1iZXIoKTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuICAgIGhhbmRsZUNhcmRDb21tZW50SW5wdXQoKSB7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvcnMuY29tbWVudElucHV0Lm9uY2hhbmdlID0gKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29tbWVudCA9IGUudGFyZ2V0LnZhbHVlO1xyXG4gICAgICAgICAgICB0aGlzLmNhcmRDb21tZW50ID0gY29tbWVudDtcclxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZUNvbW1lbnQoKTtcclxuICAgICAgICB9OyAgICAgICBcclxuICAgIH07XHJcbiAgICBoYW5kbGVDcmVhdGVDYXJkQnV0dG9uICgpIHtcclxuICAgICAgICB0aGlzLmNhcmRNb2RhbC5zYXZlQnV0dG9uSGFuZGxlcigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudmFsaWRhdGVOdW1iZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXI6IHRoaXMuY2FyZE51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICBjb21tZW50OiB0aGlzLmNhcmRDb21tZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGJyYW5kSW1hZ2VVcmw6IHRoaXMuY2FyZExvZ29JbWFnZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhcmRMaXN0LmFkZChjYXJkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FyZE1vZGFsLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xlYXIoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgaGFuZGxlT3Blbk1vZGFsKCkge1xyXG4gICAgICAgIHRoaXMuc2VsZWN0b3JzLmFkZENhcmRCdXR0b24ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jYXJkTW9kYWwuc2hvdygpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmNhcmROdW1iZXIgPSAnJztcclxuICAgICAgICB0aGlzLmNhcmRDb21tZW50ID0gJyc7XHJcbiAgICAgICAgdGhpcy5jYXJkTG9nb0ltYWdlID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvcnMuY29tbWVudElucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RvcnMubnVtYmVySW5wdXQudmFsdWUgPSAnJztcclxuICAgIH07XHJcbn0iLCJpbXBvcnQgQ2FyZCBmcm9tICcuL0NhcmQnO1xyXG5cclxuY29uc3QgZW1wdHlDb250YWluZXJUZXh0ID0gJ1lvdXIgY2FyZCBsaXN0IGlzIGVtcHR5LCB0cnkgYWRkIG5ldyBjYXJkcyB1c2luZyBcXCdBZGRcXCcgYnV0dG9uIGFib3ZlJztcclxuY29uc3QgbG9jYWxTdG9yYWdlTmFtZSA9ICdjYXJkcy1saXN0JztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yLCBkZWxldGVDb25maXJtTW9kYWwpIHtcclxuICAgICAgICB0aGlzLmNhcmRzID0gW107XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJTZWxlY3RvciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlQ29uZmlybU1vZGFsID0gZGVsZXRlQ29uZmlybU1vZGFsO1xyXG5cclxuICAgICAgICB0aGlzLmNhcmRzVG9PYmplY3RzKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDYXJkc0NvbnRhaW5lcigpO1xyXG4gICAgfTtcclxuICAgIGFkZChjYXJkKSB7XHJcbiAgICAgICAgdGhpcy5jYXJkcy5wdXNoKGNhcmQpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlQ2FyZHNDb250YWluZXIoKTtcclxuICAgIH07XHJcbiAgICByZW1vdmUoY2FyZElkKSB7XHJcbiAgICAgICAgdGhpcy5jYXJkcyA9IHRoaXMuY2FyZHMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5pZCAhPT0gY2FyZElkKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUNhcmRzQ29udGFpbmVyKCk7XHJcbiAgICB9O1xyXG4gICAgdXBkYXRlQ2FyZHNDb250YWluZXIoKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJTZWxlY3Rvci5pbm5lckhUTUwgPSAnJztcclxuICAgICAgICBpZih0aGlzLmNhcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5jYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJTZWxlY3Rvci5hcHBlbmQoY2FyZC5nZXRBc0h0bWwoKCkgPT4geyBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlbGV0ZUNvbmZpcm1Nb2RhbC5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVDb25maXJtTW9kYWwuc2F2ZUJ1dHRvbkhhbmRsZXIoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZShjYXJkLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxldGVDb25maXJtTW9kYWwuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyU2VsZWN0b3IuaW5uZXJUZXh0ID0gZW1wdHlDb250YWluZXJUZXh0OyBcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTdG9yYWdlTmFtZSwgSlNPTi5zdHJpbmdpZnkodGhpcy5jYXJkcykpO1xyXG4gICAgfTtcclxuICAgIGNhcmRzVG9PYmplY3RzKCkge1xyXG4gICAgICAgIGxldCBjYXJkc0FycmF5ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbFN0b3JhZ2VOYW1lKSk7XHJcbiAgICAgICAgaWYgKGNhcmRzQXJyYXkpIHtcclxuICAgICAgICAgICAgY2FyZHNBcnJheS5mb3JFYWNoKCBpdGVtID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FyZHMucHVzaChuZXcgQ2FyZChpdGVtKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvciAobW9kYWxTZWxlY3Rvcikge1xyXG4gICAgICAgIHRoaXMubW9kYWxTZWxlY3RvciA9IG1vZGFsU2VsZWN0b3I7XHJcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsU2VsZWN0b3IgPSBtb2RhbFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpO1xyXG4gICAgICAgIHRoaXMuc2F2ZU1vZGFsU2VsZWN0b3IgPSBtb2RhbFNlbGVjdG9yLnF1ZXJ5U2VsZWN0b3IoJy5zYXZlJyk7XHJcblxyXG4gICAgICAgIHRoaXMuY2xvc2VCdXR0b25IYW5kbGVyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgc2hvdygpIHtcclxuICAgICAgICB0aGlzLm1vZGFsU2VsZWN0b3IuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB9O1xyXG4gICAgaGlkZSgpIHtcclxuICAgICAgICB0aGlzLm1vZGFsU2VsZWN0b3IuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICB9O1xyXG4gICAgZGlzYWJsZUJ1dHRvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsU2VsZWN0b3Iuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgICAgIHRoaXMuc2F2ZU1vZGFsU2VsZWN0b3Iuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xyXG4gICAgfTtcclxuICAgIGVuYWJsZUJ1dHRvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZU1vZGFsU2VsZWN0b3IucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgICAgIHRoaXMuc2F2ZU1vZGFsU2VsZWN0b3IucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcpO1xyXG4gICAgfTtcclxuICAgIGNsb3NlQnV0dG9uSGFuZGxlcihjYikge1xyXG4gICAgICAgIHRoaXMuY2xvc2VNb2RhbFNlbGVjdG9yLm9uY2xpY2sgPSBjYjtcclxuICAgIH07XHJcbiAgICBzYXZlQnV0dG9uSGFuZGxlcihjYikge1xyXG4gICAgICAgIHRoaXMuc2F2ZU1vZGFsU2VsZWN0b3Iub25jbGljayA9IGNiO1xyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgc3BsaXRCeUZvdXJOdW1iZXJzKG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiBgJHtudW1iZXIuc2xpY2UoMCwgNCl9ICR7bnVtYmVyLnNsaWNlKDQsIDgpfSAke251bWJlci5zbGljZSg4LCAxMil9ICR7bnVtYmVyLnNsaWNlKDEyLCAxNil9YDtcclxuICAgIH0sXHJcbiAgICBnZXRGaXJzdFNpeE51bWJlcnMobnVtYmVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bWJlci5yZXBsYWNlKCAvXFxzL2csIFwiXCIpLnNsaWNlKDAsIDYpO1xyXG4gICAgfSxcclxuICAgIHJlbW92ZVNwYWNlcyhudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gbnVtYmVyLnJlcGxhY2UoIC9cXHMvZywgXCJcIik7XHJcbiAgICB9LFxyXG59IiwiaW1wb3J0IENhcmRMaXN0IGZyb20gJy4vY2xhc3Nlcy9DYXJkTGlzdC5qcyc7XHJcbmltcG9ydCBDYXJkRm9ybSBmcm9tICcuL2NsYXNzZXMvQ2FyZEZvcm0uanMnO1xyXG5pbXBvcnQgTW9kYWwgZnJvbSAnLi9jbGFzc2VzL01vZGFsLmpzJztcclxuXHJcblxyXG5jb25zdCBjYXJkTW9kYWwgPSBuZXcgTW9kYWwoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcmRNb2RhbCcpKTtcclxuY29uc3QgZGVsZXRlQ29uZmlybU1vZGFsID0gbmV3IE1vZGFsKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGVDb25maXJtTW9kYWwnKSk7XHJcblxyXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBDYXJkTGlzdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2FyZHNDb250YWluZXInKSwgZGVsZXRlQ29uZmlybU1vZGFsKTtcclxuXHJcbm5ldyBDYXJkRm9ybSh7XHJcbiAgICAgICAgbnVtYmVySW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLW51bWJlcicpLFxyXG4gICAgICAgIG51bWJlckVycm9yOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1udW1iZXItZXJyb3InKSxcclxuICAgICAgICBjb21tZW50SW5wdXQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbW1lbnQnKSxcclxuICAgICAgICBjb21tZW50RXJyb3I6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbW1lbnQtZXJyb3InKSxcclxuICAgICAgICBhZGRDYXJkQnV0dG9uOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkQ2FyZCcpLFxyXG4gICAgfSwgXHJcbiAgICBjYXJkTW9kYWwsIFxyXG4gICAgY2FyZExpc3QsXHJcbik7XHJcbiJdfQ=="}